<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="static/css/materialize.min.css"  media="screen,projection"/>
    <link href="static/css/font-awesome.min.css" rel="stylesheet">    
    <link href="static/css/multi-select.css" media="screen" rel="stylesheet" type="text/css">
    <link href="static/css/style.css" rel="stylesheet">    
    
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>Kennel Cards</title>
  </head>

  <body>
    <div id="fb-root"></div>

    <header>
      <nav class="z-depth-2">
        <div class="container">
          <div class="nav-wrapper">
            <a href="#" class="brand-logo center">
              Kennel Cards
            </a>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <div class="container"">
        <div class="row">
          <div class="col s12">
            <div class="section">
              <div class="col s12 m4 push-m8">
                <div class="container">
                  <h5>Current dogs:</h5>
                  <ul class="collection tight">
                    {% for (dog,info) in dogs %}
                        <li class="collection-item {% if info %}teal white-text{% endif %}">
                          {{ dog }}
                        </li>
                    {% endfor %}
                  </ul>
                </div>
              </div>
              <form class="col s12 m6 offset-m2 pull-m4" id="the_form">
                <h4>
                  Hi there, Volunteer!
                </h4>
                <p>
                  Please, help the Matchmaker Team by filling information for the kennel card of dogs you know.
                </p>
                <ul class="browser-default" >
                  <li>
                    Multiple submissions are encouraged. Matchmakers
                    collect them and review them all before printing.
                  </li>
                  <li>
                    Dogs with <span class="teal white-text">&nbsp;green&nbsp;</span> background
                    already have some information, but you are <b>welcome</b> to
                    submit more. Different people may have different insights about a pup.
                  </li>
                  <li>
                    Dogs who have been reviewed and printed by the
                    matchmakers dissapear from this list.
                  </li>
                </ul>
                <div class="input-field">
                  <i class="material-icons prefix">account_circle</i>
                  <input id="person" type="text" class="validate mandatory">
                  <label for="person" class="truncate"><b>Your name</b> (required)</label>
                </div>
                <div class="input-field">
                  <i class="fa fa-paw fa-2x prefix" style="vertical-align:middle"></i>
                  <input id="name" type="text" class="validate mandatory">
                  <label for="name" class="truncate"><b>Dog</b> (required)</label>
                </div>
                <div class="input-field">
                  <i class="fa fa-commenting fa-2x prefix" style="vertical-align:middle"></i>
                  <textarea id="unique" class="materialize-textarea mandatory"></textarea>
                  <label for="unique"><b>Something unique about the pup...</b> (required)</label>
                </div>
                <p>
                  <b>Activities the pup can do</b> (required)
                </p>
                <div class="collection" id="activities">
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="car" />
                    <label for="car" class="wide">
                      Go for car rides
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="cats" />
                    <label for="cats" class="wide">
                      Hang out with cats
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="couch" />
                    <label for="couch" class="wide">
                      Be a couch potato
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="tricks" />
                    <label for="tricks" class="wide">
                      Do tricks
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="dogs" />
                    <label for="dogs" class="wide">
                      Play with other dogs
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="entertain" />
                    <label for="entertain" class="wide">
                      Entertain myself
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="fetch" />
                    <label for="fetch" class="wide">
                      Play fetch
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="alone" />
                    <label for="alone" class="wide">
                      Stay home alone
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="safe" />
                    <label for="safe" class="wide">
                      Keep you safe
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="kids" />
                    <label for="kids" class="wide">
                      Hang out with kids
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="town" />
                    <label for="town" class="wide">
                      Go out on the town
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="runs" />
                    <label for="runs" class="wide">
                      Go for runs
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="swim" />
                    <label for="swim" class="wide">
                      Go swimming
                    </label>
                  </a>
                  <a href="#!" class="collection-item">
                    <input type="checkbox" class="filled-in" id="outfits" />
                    <label for="outfits" class="wide">
                      Wear outfits
                    </label>
                  </a>
                </div>
                <p class="right-align">
                  <button id="form-submit" class="btn waves-effect waves-light btn-large
                                                  wide disabled"
                          type="submit" name="action">Submit
                    <i class="material-icons right">send</i>
                  </button>
                </p>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>

    <div id="modal1" class="modals modal yellow accent-1">
      <div class="modal-content">
        <h4>Picture not found</h4>
        <p>Hey, I couldn't find a picture for <span class="picture-missing"></span>.</p>
        <p>Make sure to add a picture in the Google folder with name <span class="picture-missing"></span>.jpg
        (or .png, etc.)
        </p>
      </div>
      <div class="modal-footer yellow accent-1">
        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Dismiss</a>
      </div>
    </div>

    <div id="modal2" class="modals modal yellow accent-1">
      <div class="modal-content">
        <h4>Dog not found</h4>
        <p>Hey, I couldn't find the pup <span class="dog-missing"></span>.</p>
        <p>Make sure to hit the refresh button if rows have been added or removed from the spreadsheet.
        </p>
      </div>
      <div class="modal-footer yellow accent-1">
        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Dismiss</a>
      </div>
    </div>

    <div id="modal3" class="modals modal yellow accent-1">
      <div class="modal-content">
        <h4>Generic Exception</h4>
        <p>Please, copy and paste the message below and send it to support.</p>
        <div id="exception">
        </div>
      </div>
      <div class="modal-footer yellow accent-1">
        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Dismiss</a>
      </div>
    </div>

    <div class="row" id="info" style="display:none">
      <div class="col s12 m4 offset-m4">
        <div class="card-panel yellow accent-1" id="exception" style="display:none">
        </div>
      </div>
    </div>

    <footer class="page-footer" style="padding-top:0px">
      <div class="container">
            <p class="grey-text text-lighten-4">
              Kennel Cards idea, design, and software, is a collaboration with: Ryan Plunkett, Lara Cirkovic, Emily Pokorny, Adam Saraceno, Walter Moreira.
              <br>
              The design is released under a <a class="grey-text text-lighten-1" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
              <br>
              The software is released under the <a class="grey-text text-lighten-1" href="https://www.gnu.org/licenses/agpl-3.0.en.html">GNU Affero General Public License</a>.
            </p>
      </div>
      <div class="footer-copyright">
        <div class="container">
          © 2017 Walter Moreira
          <a class="grey-text text-lighten-4 right" href="https://github.com/austinpetsalive/kennel_card">Source Code</a>
        </div>
      </div>
    </footer>

    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="static/js/materialize.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script src="static/js/jquery.multi-select.js" type="text/javascript"></script>
    <script src="static/js/jquery.quicksearch.js" type="text/javascript"></script>


    <script type="text/javascript">
     function all_filled() {
       var empty = false;
       $('.mandatory').each(function() {
         if ($(this).val() == '') {
           empty = true;
         }
       });
       var options = false;
       if ($('#activities input:checked ~ label').length > 0) {
         options = true;
       };
       return ((!empty) && options);
     };
     
     function set_button(filled) {
       if (filled) {
         $('button').removeClass('disabled').prop('disabled', false);
       } else {
         $('button').addClass('disabled').prop('disabled', true);
       }
     };

     $(document).ready(function () {
       var url = "http://" + document.domain + ":" + location.port;
       var socket = io.connect(url + "/apa", {'path': location.pathname + 'socket.io'});

       $('.mandatory').keyup(function() {
         set_button(all_filled());
       });
       $('#activities').click(function() {
         set_button(all_filled());
       });

       $('#form-submit').click(function() {
         socket.emit('submit', {
           'person': $('#person').val(),
           'dog': $('#name').val(),
           'activities': $('#activities input:checked ~ label').map(function() {return $(this).html().trim();})
         });
         return false;
       });
     });
    </script>

  </body>
</html>


